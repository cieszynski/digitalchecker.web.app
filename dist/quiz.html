<!DOCTYPE html>
<html>

<head>
    <title>QUIZ</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        *,
        ::before,
        ::after {
            margin: 0;
            box-sizing: border-box;
        }
    </style>

    <script type="bla">
        const request = indexedDB.open("quiz", 1);
        request.onerror = (e) => {
            console.error(e);
        };

        request.onsuccess = (e) => {
            console.log(e);
        };

        request.onupgradeneeded = async (e) => {
          //  const response = await fetch("quiz.json");
          //  const data = await response.json();
          const data = [1, 2]
            const db = e.target.result;
            const objectStore = db.createObjectStore("questions", { autoIncrement: true });

            objectStore.transaction.oncomplete = (e) => {
                const questionsObjectStore = db
                    .transaction("questions", "readwrite")
                    .objectStore("questions");


                data./* questions. */forEach((question) => {
                    questionsObjectStore.add(question);
                });

            }
        }

        request.onupgradeneededs = (e) => {
            console.dir(e)
            const db = e.target.result;

            /*             fetch("quiz.json")
                            .then((response) => {
                                if (!response.ok) {
                                    throw new Error(`HTTP error! Status: ${response.status}`);
                                }
            
                                return response.json();
                            })
                            .then((json) => {
                                console.log(json) */
            //e.target.transaction.oncomplete = function () {
            const objectStore = db.createObjectStore("questions", { autoIncrement: true });

            objectStore.transaction.oncomplete = (e) => {
                const questionsObjectStore = db
                    .transaction("questions", "readwrite")
                    .objectStore("questions");

                /*                             json.questions.forEach((question) => {
                                                customerObjectStore.add(question);
                                            }); */
            }
            //}
            // });
        };
    </script>

    <script>
        async function getDir() {
            const dirHandle = await window.showOpenFilePicker({startIn: "downloads"});
            const fileHanlde = await dirHandle[0].getFile()
            console.dir(fileHanlde)
            dirHandle[0].requestPermission({mode: 'readwrite'})
            // run code for dirHandle
        }

    </script>
</head>

<body>
    <main>
        <button type="button" onclick="getDir()">test</button>
    </main>
    <nav>

    </nav>
</body>

</html>